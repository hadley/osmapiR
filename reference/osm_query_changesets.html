<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This is an API method for querying changesets. It supports querying by different criteria."><title>Query changesets — osm_query_changesets • osmapiR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Query changesets — osm_query_changesets"><meta property="og:description" content="This is an API method for querying changesets. It supports querying by different criteria."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">osmapiR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.20</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/how_to_edit_osm.html">How to edit OpenStreetMap</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jmaspons/osmapiR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Query changesets</h1>
      <small class="dont-index">Source: <a href="https://github.com/jmaspons/osmapiR/blob/HEAD/R/osmapi_changesets.R" class="external-link"><code>R/osmapi_changesets.R</code></a></small>
      <div class="d-none name"><code>osm_query_changesets.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is an API method for querying changesets. It supports querying by different criteria.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">osm_query_changesets</span><span class="op">(</span></span>
<span>  <span class="va">bbox</span>,</span>
<span>  <span class="va">user</span>,</span>
<span>  <span class="va">time</span>,</span>
<span>  <span class="va">time_2</span>,</span>
<span>  <span class="va">open</span>,</span>
<span>  <span class="va">closed</span>,</span>
<span>  <span class="va">changeset_ids</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="st">"xml"</span>, <span class="st">"json"</span><span class="op">)</span>,</span>
<span>  tags_in_columns <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>bbox</dt>
<dd><p>Find changesets within the given bounding box coordinates (<code>left,bottom,right,top</code>).</p></dd>


<dt>user</dt>
<dd><p>Find changesets by the user with the given user id (numeric) or display name (character).</p></dd>


<dt>time</dt>
<dd><p>Find changesets <strong>closed</strong> after this date and time. See details for the valid formats.</p></dd>


<dt>time_2</dt>
<dd><p>find changesets that were <strong>closed</strong> after <code>time</code> and <strong>created</strong> before <code>time_2</code>. In other words, any
changesets that were open <strong>at some time</strong> during the given time range <code>time</code> to <code>time_2</code>.</p></dd>


<dt>open</dt>
<dd><p>If <code>TRUE</code>, only finds changesets that are still <strong>open</strong> but excludes changesets that are closed or have
reached the element limit for a changeset (10,000 at the moment <code>osm_capabilities()$api$changesets</code>).</p></dd>


<dt>closed</dt>
<dd><p>If <code>TRUE</code>, only finds changesets that are <strong>closed</strong> or have reached the element limit.</p></dd>


<dt>changeset_ids</dt>
<dd><p>Finds changesets with the specified ids.</p></dd>


<dt>limit</dt>
<dd><p>Specifies the maximum number of changesets returned. A number between 1 and 100, with 100 as the default
value.</p></dd>


<dt>format</dt>
<dd><p>Format of the output. Can be <code>R</code> (default), <code>xml</code>, or <code>json</code>.</p></dd>


<dt>tags_in_columns</dt>
<dd><p>If <code>FALSE</code> (default), the tags of the changesets are saved in a single list column <code>tags</code>
containing a <code>data.frame</code> for each changeset with the keys and values. If <code>TRUE</code>, add a column for each key.
Ignored if <code>format != "R"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If <code>format = "R"</code>, returns a data frame with one OSM changeset per row.</p><div class="section">
<h3 id="format-xml-"><code>format = "xml"</code><a class="anchor" aria-label="anchor" href="#format-xml-"></a></h3>


<p>Returns a xml2::xml_document with the following format:</p>
<p></p><div class="sourceCode xml"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>&lt;<span class="kw">osm</span>&gt;</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    &lt;<span class="kw">changeset</span><span class="ot"> id=</span><span class="st">"10"</span><span class="ot"> created_at=</span><span class="st">"2008-11-08T19:07:39+01:00"</span><span class="ot"> open=</span><span class="st">"true"</span><span class="ot"> user=</span><span class="st">"fred"</span><span class="ot"> uid=</span><span class="st">"123"</span><span class="ot"> min_lon=</span><span class="st">"7.0191821"</span><span class="ot"> min_lat=</span><span class="st">"49.2785426"</span><span class="ot"> max_lon=</span><span class="st">"7.0197485"</span><span class="ot"> max_lat=</span><span class="st">"49.2793101"</span><span class="ot"> comments_count=</span><span class="st">"3"</span><span class="ot"> changes_count=</span><span class="st">"10"</span>&gt;</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>        &lt;<span class="kw">tag</span><span class="ot"> k=</span><span class="st">"created_by"</span><span class="ot"> v=</span><span class="st">"JOSM 1.61"</span>/&gt;</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>        &lt;<span class="kw">tag</span><span class="ot"> k=</span><span class="st">"comment"</span><span class="ot"> v=</span><span class="st">"Just adding some streetnames"</span>/&gt;</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>        ...</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>        &lt;<span class="kw">discussion</span>&gt;</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>            &lt;<span class="kw">comment</span><span class="ot"> date=</span><span class="st">"2015-01-01T18:56:48Z"</span><span class="ot"> uid=</span><span class="st">"1841"</span><span class="ot"> user=</span><span class="st">"metaodi"</span>&gt;</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>                &lt;<span class="kw">text</span>&gt;Did you verify those street names?&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>            &lt;/<span class="kw">comment</span>&gt;</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>            &lt;<span class="kw">comment</span><span class="ot"> date=</span><span class="st">"2015-01-01T18:58:03Z"</span><span class="ot"> uid=</span><span class="st">"123"</span><span class="ot"> user=</span><span class="st">"fred"</span>&gt;</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>                &lt;<span class="kw">text</span>&gt;sure!&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>            &lt;/<span class="kw">comment</span>&gt;</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>            ...</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>        &lt;/<span class="kw">discussion</span>&gt;</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>    &lt;/<span class="kw">changeset</span>&gt;</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>    &lt;<span class="kw">changeset</span> <span class="er">...</span>&gt;</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>      ...</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>    &lt;/<span class="kw">changeset</span>&gt;</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>&lt;/<span class="kw">osm</span>&gt;</span></code></pre><p></p></div>
</div>



<div class="section">
<h3 id="format-json-"><code>format = "json"</code><a class="anchor" aria-label="anchor" href="#format-json-"></a></h3>


<p>Returns a list with the following json structure:</p>
<p></p><div class="sourceCode json"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a> <span class="dt">"version"</span><span class="fu">:</span> <span class="st">"0.6"</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a> <span class="dt">"elements"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="fu">{</span><span class="dt">"type"</span><span class="fu">:</span> <span class="st">"changeset"</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>   <span class="dt">"id"</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>   <span class="dt">"created_at"</span><span class="fu">:</span> <span class="st">"2005-05-01T16:09:37Z"</span><span class="fu">,</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>   <span class="dt">"closed_at"</span><span class="fu">:</span> <span class="st">"2005-05-01T17:16:44Z"</span><span class="fu">,</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>   <span class="dt">"open"</span><span class="fu">:</span> <span class="er">False</span><span class="fu">,</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>   <span class="dt">"user"</span><span class="fu">:</span> <span class="st">"Petter Reinholdtsen"</span><span class="fu">,</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>   <span class="dt">"uid"</span><span class="fu">:</span> <span class="dv">24</span><span class="fu">,</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>   <span class="dt">"minlat"</span><span class="fu">:</span> <span class="fl">59.9513092</span><span class="fu">,</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>   <span class="dt">"minlon"</span><span class="fu">:</span> <span class="fl">10.7719727</span><span class="fu">,</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>   <span class="dt">"maxlat"</span><span class="fu">:</span> <span class="fl">59.9561501</span><span class="fu">,</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>   <span class="dt">"maxlon"</span><span class="fu">:</span> <span class="fl">10.7994537</span><span class="fu">,</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>   <span class="dt">"comments_count"</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>   <span class="dt">"changes_count"</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>   <span class="dt">"discussion"</span><span class="fu">:</span> <span class="ot">[</span><span class="fu">{</span><span class="dt">"date"</span><span class="fu">:</span> <span class="st">"2022-03-22T20:58:30Z"</span><span class="fu">,</span> <span class="dt">"uid"</span><span class="fu">:</span> <span class="dv">15079200</span><span class="fu">,</span> <span class="dt">"user"</span><span class="fu">:</span> <span class="st">"Ethan White of Cheriton"</span><span class="fu">,</span> <span class="dt">"text"</span><span class="fu">:</span> <span class="st">"wow no one have said anything here 3/22/2022</span><span class="ch">\n</span><span class="st">"</span><span class="fu">}</span><span class="ot">]</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>  <span class="fu">}</span><span class="ot">,</span> <span class="er">...</span><span class="ot">]</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="fu">}</span></span></code></pre><p></p></div>
</div>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Where multiple queries are given the result will be those which match all of the requirements. The contents of the
returned document are the changesets and their tags. To get the full set of changes associated with a changeset, use
<code><a href="osm_download_changeset.html">osm_download_changeset()</a></code> on each changeset ID individually.</p>
<p>Modification and extension of the basic queries above may be required to support rollback and other uses we find for
changesets.</p>
<p>This call returns latest changesets matching criteria,
<a href="https://github.com/openstreetmap/openstreetmap-website/blob/f1c6a87aa137c11d0aff5a4b0e563ac2c2a8f82d/app/controllers/api/changesets_controller.rb#L174" class="external-link">ordered by <code>created_at</code></a>
– see the <a href="https://github.com/openstreetmap/openstreetmap-website/blob/master/app/controllers/api/changesets_controller.rb#L174" class="external-link">current state</a>.</p>
<p>Te valid formats for <code>time</code> and <code>time_2</code> parameters are anything that
<a href="https://ruby-doc.org/stdlib-2.7.0/libdoc/time/rdoc/Time.html#method-c-parse" class="external-link"><code>Time.parse</code> Ruby function</a> will parse.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other get changesets' functions: 
<code><a href="osm_download_changeset.html">osm_download_changeset</a>()</code>,
<code><a href="osm_get_changesets.html">osm_get_changesets</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">chst_ids</span> <span class="op">&lt;-</span> <span class="fu">osm_query_changesets</span><span class="op">(</span>changeset_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">137627129</span>, <span class="fl">137625624</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">chst_ids</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">chsts</span> <span class="op">&lt;-</span> <span class="fu">osm_query_changesets</span><span class="op">(</span></span></span>
<span class="r-in"><span>  bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.241112</span>, <span class="fl">38.0294955</span>, <span class="fl">8.4203171</span>, <span class="fl">42.9186456</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  user <span class="op">=</span> <span class="st">"Mementomoristultus"</span>,</span></span>
<span class="r-in"><span>  time <span class="op">=</span> <span class="st">"2023-06-22T02:23:23Z"</span>,</span></span>
<span class="r-in"><span>  time_2 <span class="op">=</span> <span class="st">"2023-06-22T00:38:20Z"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">chsts</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">chsts2</span> <span class="op">&lt;-</span> <span class="fu">osm_query_changesets</span><span class="op">(</span></span></span>
<span class="r-in"><span>  bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-9.3015367,41.8073642,-6.7339533,43.790422"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  user <span class="op">=</span> <span class="st">"Mementomoristultus"</span>,</span></span>
<span class="r-in"><span>  closed <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">chsts2</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Joan Maspons.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

